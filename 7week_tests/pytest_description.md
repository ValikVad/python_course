# Туториал по pytest

## Введение

pytest — это мощный фреймворк для написания тестов на Python. Он прост в использовании, поддерживает множество функций и расширений, что делает его отличным выбором для тестирования вашего кода. В этом туториале вы узнаете, как начать работу с pytest, как писать и запускать тесты.

## Установка

Для установки pytest используйте pip:
```bash 
pip install pytest
pip install pytest-timeout
```

## Написание простого теста

Создайте файл с именем test_sample.py и добавьте в него следующий код:
```python 
def add(a, b):
    return a + b

def test_add():
    assert add(2, 3) == 5
    assert add(-1, 1) == 0
    assert add(-1, -1) == -2

```
### Структура тестов

- Функции тестов должны начинаться с test_.
- Используйте оператор assert, чтобы проверять результат выполнения.

## Запуск тестов

Чтобы запустить тесты, выполните следующую команду в терминале:

pytest


По умолчанию pytest будет искать все файлы, начинающиеся с test_ или заканчивающиеся на _test.py.

## Отчет по тестам

После запуска pytest, вы увидите отчёт о выполнении тестов. Каждый тест, который прошел, будет отмечен . (точкой), а неудачные тесты будут отмечены F (неуспешный).

## Расширенные функции

### Параметризация тестов

Вы можете использовать параметризацию для тестирования одной функции с несколькими входными данными:
```python
import pytest

@pytest.mark.parametrize("a, b, expected", [
    (2, 3, 5),
    (-1, 1, 0),
    (-1, -1, -2),
])
def test_add(a, b, expected):
    assert add(a, b) == expected
```

### Проблемы и фикстуры

pytest поддерживает фикстуры для настройки тестового окружения:
```python
import pytest

@pytest.fixture
def sample_data():
    return [1, 2, 3]

def test_sum(sample_data):
    assert sum(sample_data) == 6
```

### Пропуск тестов

Если вы хотите пропустить тест, вы можете использовать декоратор

```pyton
@pytest.mark.skip:

@pytest.mark.skip(reason="This test is skipped for demonstration.")
def test_addition():
    assert add(2, 3) == 5
```

## Запуск с различными опциями

Вы можете передавать различные опции при запуске pytest. Например, -v для подробного вывода:
```bash
pytest -v
```

Вы можете также указать конкретный файл или директорию для тестирования:
```bash
pytest tests/
```
## Проверка времени работы теста

```python
@pytest.mark.timeout(1)
def test_add_timeout_fail():
    time.sleep(2)
    assert add(2, 3) == 5
    assert add(-1, 1) == 0
    assert add(-1, -1) == -2
```



## Заключение

pytest — это мощное и гибкое средство для написания и запуска тестов на Python. Мы рассмотрели основные функции, такие как написание тестов, параметризация, фикстуры и использование различных опций. Теперь вы можете начать писать свои тесты и улучшать качество вашего кода!

Для более подробной информации обратитесь к официальной документации pytest (https://docs.pytest.org/en/latest/).